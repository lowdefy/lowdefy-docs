id: statistic
type: page_sider_menu
public: true
properties:
  title: Statistic
blocks:
  _ref:
    path: blocks/template.yaml
    vars:
      block_name: Statistic
      description_content: |
        A statistic header block.
      block_type: statistic
      label: false
      kind: display
      properties_transform:
        _state: block.properties
      properties_form:
        - id: block.properties.title
          type: text_input
          defaultValue: block_id
          properties:
            title: title
            size: small
            label:
              extra: Title to describe the input component, if no title is specified the block id is displayed.
              span: 2
        - id: select_value_type_card
          type: card
          blocks:
            - id: select_value_type
              type: radio_button_input
              defaultValue: Number
              properties:
                title: value Type
                size: small
                label:
                  extra: The display value can be either a String or a Number.
                options:
                  - Number
                  - String
        - id: value_number
          field: block.properties.value
          type: number_input
          visible:
            _mql_test:
              select_value_type: Number
          properties:
            title: value
            size: small
            label:
              extra: Display number value.
              span: 2
        - id: value_text
          field: block.properties.value
          type: text_input
          visible:
            _mql_test:
              select_value_type: String
          properties:
            title: value
            size: small
            label:
              extra: Display text value.
              span: 2
        - id: block.properties.decimalSeparator
          type: text_input
          defaultValue: "."
          properties:
            title: decimalSeparator
            size: small
            label:
              extra: Decimal separator.
              span: 3
        - id: block.properties.formatter.type
          type: select_input
          defaultValue: default
          properties:
            title: formatter.type
            size: small
            label:
              extra: Type of formatter to apply to value.
              span: 3
            options:
              - default
              - date
              - humanizeDuration
        - id: block.properties.formatter.properties.format
          type: text_input
          visible:
            _mql_test:
              block.properties.formatter.type: date
          properties:
            title: formatter.properties.format
            size: small
            label:
              extra: Moment.js date format
              span: 3
            options:
              - default
              - date
              - humanizeDuration
        - id: block.properties.groupSeparator
          type: text_input
          defaultValue: ","
          properties:
            title: groupSeparator
            size: small
            label:
              extra: Group separator.
              span: 3
        - id: block.properties.precision
          type: number_input
          defaultValue: 2
          properties:
            title: precision
            size: small
            label:
              extra: Number of decimals to display.
              span: 2
        - id: block.properties.prefix
          type: text_input
          properties:
            title: prefix
            size: small
            label:
              extra: Prefix text, priority over prefixIcon.
              span: 2
        - _ref:
            path: blocks/icon_template.yaml
            vars:
              icon_id: block.properties.prefixIcon
              icon_field_name: prefixIcon
              icon_description: Icon to prefix statistic.

        - id: block.properties.suffix
          type: text_input
          properties:
            title: suffix
            size: small
            label:
              extra: Suffix text, priority over suffixIcon.
              span: 2
        - _ref:
            path: blocks/icon_template.yaml
            vars:
              icon_id: block.properties.suffixIcon
              icon_field_name: suffixIcon
              icon_description: Icon to suffix statistic.
        - _ref: 
            path: blocks/style_object_template.yaml
            vars:
              grid_id: valueStyle_grid
              style_id: valueStyle_input
              button_id: apply_valueStyle_button
              field_name: valueStyle

      available_actions_description: |
        ###### No available actions.

      examples:
        - id: example_1_card
          type: card
          blocks:
            - id: example_1
              type: statistic
              box:
                span: 6
              properties:
                title: Statistic
                value: 1000
            - id: example_1_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_1",
                    "type": "statistic",
                    "properties": {
                      "title": "Statistic"
                      "value": 1000
                    }
                  }
                  ```
        - id: example_2_card
          type: card
          blocks:
            - id: example_2
              type: statistic
              box:
                span: 6
              properties:
                title: Decimal, group separators and precision
                value: 1000.9999
                decimalSeparator: ","
                groupSeparator: " "
                precision: 2
            - id: example_2_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_2",
                    "type": "statistic",
                    "properties":{
                      "title": "Statistic",
                      "value": 1000.9999,
                      "decimalSeparator": ",",
                      "groupSeparator": " ",
                      "precision": 2
                    }
                  }
                  ```
        - id: example_3_card
          type: card
          blocks:
            - id: example_3
              type: statistic
              box:
                span: 6
              properties:
                title: Prefix and suffix
                value: 1000
                prefix: $
                suffixIcon: ShoppingCartOutlined
            - id: example_3_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_3",
                    "type": "statistic",
                    "properties":{
                      "title": "Prefix and suffix",
                      "value": 1000,
                      "prefix": "$",
                      "suffixIcon": "ShoppingCartOutlined"
                    }
                  }
                  ```
        - id: example_4_card
          type: card
          blocks:
            - id: example_4
              type: statistic
              box:
                span: 6
              properties:
                title: Date formatter
                value: 1999-12-31
                formatter:
                  type: date
                  properties:
                    format: D MMMM YYYY

            - id: example_4_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_4",
                    "type": "statistic",
                    "properties":{
                      "title": "Date formatter",
                      "value": "1999-12-31",
                      "formatter":{
                        "type": "date",
                        "properties":{
                          "format": "D MMMM YYYY"
                        }
                      }
                    }
                  }
                  ```
        - id: example_5_card
          type: card
          blocks:
            - id: example_5
              type: statistic
              box:
                span: 6
              properties:
                title: Duration formatter
                value: 1000000000
                formatter:
                  type: humanizeDuration

            - id: example_5_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_5",
                    "type": "statistic",
                    "properties":{
                      "title": "Duration formatter",
                      "value": 1000000000, // value should be milliseconds
                      "formatter":{
                        "type": "humanizeDuration"
                      }
                    }
                  }
                  ```
        - id: example_6_card
          type: card
          blocks:
            - id: example_6
              type: statistic
              box:
                span: 6
              properties:
                title: Value style
                value: 1000
                prefixIcon: RiseOutlined
                suffix: "%"
                valueStyle:
                  color: green
                  font-weight: bold
                  font-size: 40

            - id: example_6_code
              type: markdown
              box:
                span: 6
              properties:
                content: |
                  ```json
                  {
                    "id": "example_6",
                    "type": "statistic",
                    "properties":{
                      "title": "Value style",
                      "value": 1000,
                      "prefixIcon": "RiseOutlined",
                      "suffix": "%",
                      "valueStyle":{
                        "color": "green",
                        "font-weight": "bold",
                        "font-size": 40
                      }
                    }
                  }
                  ```

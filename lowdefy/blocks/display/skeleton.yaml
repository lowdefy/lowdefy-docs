id: skeleton
type: page_sider_menu
public: true
properties:
  title: Skeleton
actions:
  onInit:
    - id: initialize_state 
      type: set()
      params:
        block:
          properties:
            active: true
            avatar: false
blocks:
  _ref:
    path: blocks/template.yaml
    vars:
      block_name: Skeleton
      description_content: |
        Skeleton block.
      block_type: skeleton
      label: false
      kind: display
      properties_transform:
        _if:
          test:
            _eq:
              - _state: skeleton_avatar_type
              - Boolean
          then:
            _get:
              key: "0"
              on:
                _mql_aggregate:
                  pipeline:
                    - $addFields:
                        avatar: $avatar.boolean
                  on:
                    - _state: block.properties
          else:
            _state: block.properties
      properties_form:
        - id: block.properties.title
          type: switch_input
          defaultValue: true
          css:
            label:
              --span: 2
          properties:
            title: title
            size: small
            label:
              extra: Show title placeholder.
        - id: block.properties.active
          type: switch_input
          defaultValue: true
          css:
            label:
              --span: 2
          properties:
            title: active
            size: small
            label:
              extra: Show animation effect.
        - id: skeleton_avatar_type_card
          type: card
          blocks:
            - id: skeleton_avatar_type
              type: radio_button_input
              defaultValue: Boolean
              properties:
                title: Avatar Type
                size: small
                label:
                  extra: Skeleton avatar can either be a boolean or an object with size and shape properties.
                options:
                  - Boolean
                  - Object
        - id: block.properties.avatar.boolean
          type: switch_input
          defaultValue: false
          css:
            label:
              --span: 2
          visible:
            _mql_test:
              skeleton_avatar_type: Boolean
          properties:
            title: avatar
            size: small
            label:
              extra: Show avatar placeholder.
        - id: block.properties.avatar.shape
          type: radio_button_input
          css:
            label:
              --span: 2
          visible:
            _mql_test:
              skeleton_avatar_type: Object
          defaultValue: square
          properties:
            title: avatar.shape
            size: small
            label:
              extra: The shape of the avatar.
            options:
              - circle
              - square
        - id: block.properties.paragraph
          type: switch_input
          defaultValue: true
          css:
            label:
              --span: 2
          properties:
            title: paragraph
            size: small
            label:
              extra: Show paragraph placeholder.
        - id: block.properties.title
          type: switch_input
          defaultValue: true
          css:
            label:
              --span: 2
          properties:
            title: title
            size: small
            label:
              extra: Show title placeholder.
      available_actions_description: |
        ###### onClick
        Triggered when the button is clicked.

      examples:
        - id: example_1_card
          type: card
          blocks:
            - id: example_1_block_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_1_title
                  type: markdown
                  properties:
                    content: |
                      ##### Basic skeleton
                - id: example_1
                  type: skeleton
            - id: example_1_code_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_1_code
                  type: markdown
                  properties:
                    content: |
                      ```json
                      {
                        "id": "example_1",
                        "type": "skeleton"
                        }
                      }
                      ```
        - id: example_2_card
          type: card
          blocks:
            - id: example_2_block_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_2_title
                  type: markdown
                  properties:
                    content: |
                      ##### No animation
                - id: example_2
                  type: skeleton
                  properties:
                    active: false
            - id: example_2_code_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_2_code
                  type: markdown
                  properties:
                    content: |
                      ```json
                      {
                        "id": "example_2",
                        "type": "skeleton",
                        "properties": {
                          "active": false
                        }
                        }
                      }
                      ```
        - id: example_3_card
          type: card
          blocks:
            - id: example_3_block_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_3_title
                  type: markdown
                  properties:
                    content: |
                      ##### Show avatar and hide title
                - id: example_3
                  type: skeleton
                  properties:
                    avatar: true
                    title: false
            - id: example_3_code_grid
              type: grid
              css:
                block:
                  --span: 6
              blocks:
                - id: example_3_code
                  type: markdown
                  properties:
                    content: |
                      ```json
                      {
                        "id": "example_3",
                        "type": "skeleton",
                        "properties": {
                          "avatar": true,
                          "title": false
                        }
                        }
                      }
                      ```

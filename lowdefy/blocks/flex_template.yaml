- id: card_title
  type: card
  blocks:
    - id: title
      type: title
      properties:
        level: 2
        content:
          _var: block_name
    - id: description
      type: markdown
      properties:
        content:
          _var: page_description

- id: c1
  type: box
  blocks:
    - id: block_divider
      type: divider
      properties:
        title: Block
    - id: block_wrap2
      type: box
      css:
        --span: 12
      blocks:
        - id: block_name
          type:
            _var: block_type
          css:
            _var: css_transform
          visible:
            _state: block.visible
          properties:
            _state: block.properties
          blocks:
            - id: flex_1
              type: html
              properties:
                html: '<div>ONE</div>'
              visible:
                _state: flex_blocks.0.visible
              css:
                _parse:
                  _state: flex_blocks.0.style
            - id: flex_2
              type: html
              properties:
                html: '<div>TWO</div>'
              visible:
                _state: flex_blocks.1.visible
              css:
                _parse:
                  _state: flex_blocks.1.style
            - id: flex_3
              type: html
              properties:
                html: '<div>THREE</div>'
              visible:
                _state: flex_blocks.2.visible
              css:
                _parse:
                  _state: flex_blocks.2.style
            - id: flex_4
              type: html
              properties:
                html: '<div>FOUR</div>'
              visible:
                _state: flex_blocks.3.visible
              css:
                _parse:
                  _state: flex_blocks.3.style
            - id: flex_5
              type: html
              properties:
                html: '<div>FIVE</div>'
              visible:
                _state: flex_blocks.4.visible
              css:
                _parse:
                  _state: flex_blocks.4.style
            - id: flex_6
              type: html
              properties:
                html: '<div>SIX</div>'
              visible:
                _state: flex_blocks.5.visible
              css:
                _parse:
                  _state: flex_blocks.5.style
- id: setup_flex
  type: box
  css:
    --span: 6
  blocks:
    - id: setup_divider
      type: divider
      properties:
        title: Block Setup
    - id: setup_card
      type: card
      properties: 
        size: small
      blocks:
        - id: setup_markdown
          type: markdown
          properties:
            content:
              _nunjucks:
                template: |
                  ```json
                  {{ value | safe }}
                  ```
                on:
                  value:
                    _stringify:
                      id: block_id
                      type:
                        _state: css_transform
                      css:
                        _var: css_transform
                      visible:
                        _state: block.visible
                      properties:
                        _state: block.properties

- id: settings_grid
  type: box
  css:
    --span: 6
  blocks:
    - id: settings_divider
      type: divider
      properties:
        title: Settings
    - id: block_collapse
      type: collapse
      properties:
        defaultActiveKey: properties
        panels:
          - key: css
            title: 'css:'
          - key: properties
            title: 'properties:'
          - key: actions
            title: 'actions:'
          - key: visible
            title: 'visible:'
          - key: blocks
            title: 'blocks:'
      blocks:
        css:
          - id: css_form
            type: box
            css:
              Content:
                --gap: 0
            blocks:
              _var: css_form
        visible:
          - id: block.visible
            type: switch_input
            defaultValue: true
            properties:
              title: visible
              label:
                extra: Toggle if block is visible and has a value in state.
                inline: true
              size: small

        properties:
          - id: flex_properties_form
            type: box
            css:
              Content:
                --gap: 0
            blocks:
              _var: flex_properties_form
        actions:
          - id: actions_description
            type: markdown
            properties:
              content:
                _var: actions_description

        blocks:
          - id: flex_blocks
            type: list
            css:
              Content:
                --display: flex
            properties:
              hideAddButton: true
              hideRemoveButton: true
            blocks:
              - id: flex_blocks.$.gd
                type: box
                css:
                  flex: 0 0 15ch
                  Content:
                    --display: flex
                blocks:
                  - id: flex_blocks.$.name
                    type: markdown
                    properties:
                      content: 
                        _nunjucks: 
                          template: '##### {{ name }}'
                          on:
                            _state: flex_blocks.$
                  - id: flex_blocks.$.visible
                    type: switch_input
                    css:
                      Label:
                        --inline: true
                    properties:
                      title: visible
                      size: small
              - id: flex_blocks.$.style
                type: text_area_input
                css:
                  flex: auto
                  Label:
                    --inline: true
                properties:
                  title: css
                  size: small
                  rows: 3
        
- id: examples_divider
  type: divider
  properties:
    title: Examples
- id: examples_grid
  type: box
  blocks:
    _var: examples

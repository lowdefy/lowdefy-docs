id: _get
type: page_sider_menu
public: true
properties:
  title: Get


actions:
  onInit:
    - id: set_state
      type: setState()
      params:
        string: A string value
        boolean: true
        date:
          _date: "now"
        array_primitive:
          - 1
          - 2.5
          - 3000
        array_object:
          - test: true
            name: Adam
            value: 10
          - test: false
            name: Bob
            value: 50
          - test: true
            name: Carl
            value: 1000
        object:
          string: text
          boolean: false
          date:
            _date: "2000-01-01"
          array:
            - A
            - B
            - C
blocks:
  - id: card_display
    type: card
    blocks:
      - id: title
        type: title
        properties:
          level: 2
          content: Get Operator
      - id: description
        type: markdown
        properties:
          content: |
            The `_get` operator allows you to access a specific field in an object or an index in an array.

            #### Parameters
            `_get` takes two parameters:

            - `on` : The object or array field on which to retrieve a value.
            - `key` : The field within the object or index of the array specified in `on` from which to retrieve a value. The `key` should be a string, even if it is the index of an array, eg. index key '0' instead of 0.

      - id: title_playground
        type: divider
        properties:
          title: Playground
      - id: box_state
        type: box
        style:
          --span: 4
        blocks:
          - id: title_state
            type: divider
            properties:
              title: State
          # - id: card_state
          #   type: card
          #   blocks:
          - id: state
            type: markdown
            properties:
              content:
                _nunjucks:
                  template: |
                    ```json
                    {{ state_all | safe }}
                    ```
                  on:
                    state_all:
                      _stringify:
                        _state: true
      - id: box_operator
        type: box
        style:
          --span: 4
        blocks:
          - id: title_operator
            type: divider
            properties:
              title: Operator
          # - id: card_operator
          #   type: card
          #   blocks:
          - id: operator
            type: text_area_input
            style:
              --span: 11
              sm:
                --span: 11
              Label:
                --span: 3
            defaultValue: |
              {
                "key": "array_primitive",
                "on": {
                  "string": "Some text",
                  "array_primitive": [1,2,3],
                  "array_object": [
                    {
                      "name": "Adam",
                      "value": 10
                    },
                    {
                      "name": "Bob",
                      "value": 50
                    },
                    {
                      "name": "Carl",
                      "value": 1000
                    }
                  ]
                }
              }
            properties:
              title: _get
              autoRows:
                minRows: 10
              Label:
                colon: true
      # - id: box_setup
      #   type: box
      #   style:
      #     --span: 4
      #   blocks:
          - id: title_setup
            type: divider
            properties:
              title: Operator Setup
          # - id: card_setup
          #   type: card
          #   blocks:
          - id: setup
            type: markdown
            properties:
              content:
                _nunjucks:
                  template: |
                    ```json
                    {
                      "_get": {{ operator | safe }}
                    }
                    ```
                  on:
                    operator:
                      _stringify:
                        _parse:
                          _state: operator
      - id: box_output
        type: box
        style:
          --span: 4
        blocks:
          - id: title_output
            type: divider
            properties:
              title: Output
          # - id: card_output
          #   type: card
          #   blocks:
          - id: output
            type: markdown
            properties:
              content:
                _nunjucks:
                  template: |
                    {% if is_primitive %}
                    {{ value_key }}
                    {% else %}
                    ```json
                    {{ value_all | safe  }}
                    ```
                    {% endif %}
                  on:
                    is_primitive:
                      _type:
                        type: primitive
                        on:
                          _get: 
                            _parse:
                              _state: operator
                    value_key:
                      _get: 
                        _parse:
                          _state: operator
                    value_all:
                      _stringify:
                        _get: 
                          _parse:
                            _state: operator

      - id: title_examples
        type: divider
        properties:
          title: Examples
      - id: example_1_card
        type: card
        blocks:
          - id: example_1_description
            type: markdown
            properties:
              content: |
                Use _get to access object keys in state.
          - id: example_1_block_box
            type: box
            style:
              --span: 6
            blocks:
              - id: block_1
                type: text_input
                properties:
                  title: Block 1
                  label:
                    extra: Use _get to set a placeholder from an object.
                  placeholder:
                    _get:
                      key: string
                      on:
                        _state: true
              - id: block_2
                type: radio_input
                properties:
                  title: Block 2
                  label:
                    extra: Set any selector type options.
                  options:
                    _get:
                      key: array
                      on:
                        _state: object
          - id: example_1_code_box
            type: box
            style:
              --span: 6
            blocks:
              - id: example_1_code
                type: markdown
                properties:
                  content: |
                    ```json
                    {
                      "blocks": [
                        {
                          "id": "block_1",
                          "type": "text_input",
                          "properties":{
                            "title": "Block 1",
                            "placeholder": {
                              "_get": {
                                "key": "string",
                                "on": {
                                  "_state": true
                                }
                              }
                            }
                          }
                        },
                        {
                          "id": "block_2",
                          "type": "radio_input",
                          "properties": {
                            "title": "Block 2",
                            "options": {
                              "_get": {
                                "key": "array",
                                "on": {
                                  "_state": "object"
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                    ```
      - id: example_2_card
        type: card
        blocks:
          - id: example_2_description
            type: markdown
            properties:
              content: |
                Use _get to access array indexes in state.
          - id: example_2_block_box
            type: box
            style:
              --span: 6
            blocks:
              - id: block_3
                type: number_input
                properties:
                  title: Block 3
                  placeholder:
                    _get:
                      key: '2'
                      on:
                        _state: array_primitive
                  label:
                    extra: Use _get to set a defaultValue from an array.
              - id: block_4
                type: text_input
                properties:
                  title: Block 4
                  placeholder:
                    _get:
                      key: '1.name'
                      on:
                        _state: array_object
          - id: example_2_code_box
            type: box
            style:
              --span: 6
            blocks:
              - id: example_2_code
                type: markdown
                properties:
                  content: |
                    ```json
                    {
                      "blocks": [
                        {
                          "id": "block_3",
                          "type": "number_input",
                          "properties":{
                            "title": "Block 3",
                            "placeholder": {
                              "_get": {
                                "key": "2",
                                "on": {
                                  "_state": "array_primitive"
                                }
                              }
                            }
                          }
                        },
                        {
                          "id": "block_4",
                          "type": "text_input",
                          "properties": {
                            "title": "Block 4",
                            "placeholder": {
                              "_get": {
                                "key": "1.name",
                                "on": {
                                  "_state": "array_object"
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                    ```
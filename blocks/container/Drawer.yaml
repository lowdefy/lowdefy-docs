id: Drawer
type: PageSiderMenu
public: true
properties:
  title: Drawer
actions:
  onInit:
    - id: init
      type: SetState
      params:
        _ref: blocks/html_blocks.yaml
blocks:
  _ref:
    path: blocks/popup_template.yaml
    vars:
      block_type: Drawer
      block_name: Drawer
      description_content: |
        A panel which slides in from the edge of the screen.
      popup_method: toggleOpen
      popup_button_title: Open Drawer
      style_transform:
        _parse:
          _state: style_block_input
      style_form:
        - id: style_block_input
          type: TextArea
          layout:
            _global: settings_input_layout
          defaultValue: "{}"
          properties:
            title: block
            rows: 3
            size: small
            label:
              span: 8
              extra: CSS Object style properties. Should be in JSON format.
      properties_form:
        - id: block.properties.closable
          type: Switch
          defaultValue: true
          layout:
            _global: settings_input_layout
          properties:
            title: closable
            size: small
            label:
              span: 8
              extra: Whether a close (x) button is visible on top right of the Drawer dialog or not.
        - id: block.properties.mask
          type: Switch
          defaultValue: true
          layout:
            _global: settings_input_layout
          properties:
            title: mask
            size: small
            label:
              span: 8
              extra: Whether to show mask (shaded out background) or not.
        - id: block.properties.maskClosable
          type: Switch
          defaultValue: true
          layout:
            _global: settings_input_layout
          properties:
            title: maskClosable
            size: small
            label:
              span: 8
              extra: Clicking on the mask (area outside the Drawer) to close the Drawer or not.
        - id: block.properties.title
          type: TextInput
          layout:
            _global: settings_input_layout
          properties:
            title: title
            size: small
            label:
              span: 8
              extra: The title of the Drawer.
        - id: block.properties.width
          type: TextInput
          defaultValue: 256px
          layout:
            _global: settings_input_layout
          properties:
            title: width
            size: small
            label:
              span: 8
              extra: Width of the Drawer dialog.
        - id: block.properties.height
          type: TextInput
          defaultValue: 256px
          layout:
            _global: settings_input_layout
          properties:
            title: height
            size: small
            label:
              span: 8
              extra: When placement is top or bottom, height of the Drawer dialog.
        - id: block.properties.zIndex
          type: NumberInput
          layout:
            _global: settings_input_layout
          properties:
            title: zIndex
            size: small
            label:
              span: 8
              extra: The z-index of the Drawer.
        - id: block.properties.placement
          type: ButtonSelector
          defaultValue: right
          layout:
            _global: settings_input_layout
          properties:
            title: placement
            size: small
            options:
              - top
              - right
              - bottom
              - left
            label:
              span: 8
              extra: The placement of the Drawer.
        - id: block.properties.keyboard
          type: Switch
          defaultValue: true
          layout:
            _global: settings_input_layout
          properties:
            title: keyboard
            size: small
            label:
              span: 8
              extra: Enable closing drawer with escape key.
        
      actions_description: | 
        #### onClose
        Called when the Drawer is closed.

      methods_form:
        - id: method_toggleOpen
          type: Button
          properties:
            title: toggleOpen
          actions:
            onClick:
              - id: click_toggleOpen
                type: CallMethod
                params:
                  blockId: block_name
                  method: toggleOpen
        - id: desc_toggleOpen
          type: Markdown
          properties:
            content: |
              Toggle drawer open or closed.
              ```yaml
                actions:
                  onClick:
                  - id: click_toggleOpen
                    type: CallMethod
                    params:
                      blockId: block_name
                      method: toggleOpen
              ```
        - id: method_setOpen
          type: Button
          properties:
            title: setOpen 
          actions:
            onClick:
              - id: click_setOpen
                type: CallMethod
                params:
                  blockId: block_name
                  method: setOpen
                  args:
                    open: true
        - id: desc_setOpen
          type: Markdown
          properties:
            content: |
              Set the drawer to open.
              ```yaml
                actions:
                  onClick:
                  - id: click_setOpen
                    type: CallMethod
                    params:
                      blockId: block_name
                      method: setOpen
                      args:
                        open: true
              ```

      examples:
        - id: example_1_card
          type: Card
          blocks:
            - id: example_1_block_grid
              type: Box
              layout:
                span: 6
              blocks:
                - id: example_1_title
                  type: Markdown
                  properties:
                    content: |
                      ##### Uncontrolled Drawer with input form
                - id: drawer_button
                  type: Button
                  properties:
                    title: Open Drawer
                  actions:
                    onClick:
                      - id: click_method
                        type: CallMethod
                        params:
                          blockId: example_1_drawer
                          method: toggleOpen
                - id: example_1_drawer
                  type: Drawer
                  properties:
                    title: Add New Contact
                    width: 400
                  blocks:
                    - id: example_1_markdown
                      type: Markdown
                      properties:
                        content: |
                          Please complete the details in this form to add a new contact.
                    - id: example_1_name
                      type: TextInput
                      required: true
                      properties:
                        title: Name
                    - id: example_1_surname
                      type: TextInput
                      required: true
                      properties:
                        title: Surname
                    - id: save_button
                      type: Button
                      properties:
                        title: Save
                      actions:
                        onClick:
                          - id: validate_form
                            type: Validate
                          - id: click_method
                            type: CallMethod
                            params:
                              blockId: example_1_drawer
                              method: toggleOpen
                          
            - id: example_1_code_grid
              type: Box
              layout:
                span: 6
              blocks:
                - id: example_1_code
                  type: Markdown
                  properties:
                    content: |
                      ```yaml
                        - id: drawer_button
                          type: Button
                          properties:
                            title: Open Drawer
                          actions:
                            onClick:
                              - id: click_method
                                type: CallMethod
                                params:
                                  blockId: example_1_drawer
                                  method: toggleOpen
                        - id: example_1_drawer
                          type: Drawer
                          properties:
                            title: Add New Contact
                            width: 400
                          blocks:
                            - id: example_1_markdown
                              type: Markdown
                              properties:
                                content: |
                                  Please complete the details in this form to add a new contact.
                            - id: example_1_name
                              type: TextInput
                              required: true
                              properties:
                                title: Name
                            - id: example_1_surname
                              type: TextInput
                              required: true
                              properties:
                                title: Surname
                            - id: save_button
                              type: Button
                              properties:
                                title: Save
                              actions:
                                onClick:
                                  - id: validate_form
                                    type: Validate
                                  - id: click_method
                                    type: CallMethod
                                    params:
                                      blockId: example_1_drawer
                                      method: toggleOpen
                      ```
        

        - id: example_2_card
          type: Card
          blocks:
            - id: example_2_block_grid
              type: Box
              layout:
                span: 6
              blocks:
                - id: example_2_title
                  type: Markdown
                  properties:
                    content: |
                      ##### Controlled Drawer with details
                - id: example_2_drawer_button
                  type: Button
                  properties:
                    title: Open Drawer
                  actions:
                    onClick:
                      - id: click_open
                        type: SetState
                        params:
                          example_2_open:
                            _not:
                              _state: example_2_open
                - id: example_2_drawer
                  type: Drawer
                  properties:
                    title: More details
                    open: 
                      _not:
                        _not:
                          _state: example_2_open
                  actions:
                    onOk: 
                      - id: click_ok
                        type: SetState
                        params:
                          example_2_open:
                            _not:
                              _state: example_2_open
                    onCancel: 
                      - id: click_cancel
                        type: SetState
                        params:
                          example_2_open:
                            _not:
                              _state: example_2_open
                  blocks:
                    - id: example_2_drawer
                      type: Markdown
                      properties:
                        content: |
                          This drawer is controlled by the external state `example_2_open`.

                          
            - id: example_2_code_grid
              type: Box
              layout:
                span: 6
              blocks:
                - id: example_2_code
                  type: Markdown
                  properties:
                    content: |
                      ```yaml
                        - id: example_2_drawer_button
                          type: Button
                          properties:
                            title: Open Drawer
                          actions:
                            onClick:
                              - id: click_open
                                type: SetState
                                params:
                                  example_2_open:
                                    _not:
                                      _state: example_2_open
                        - id: example_2_drawer
                          type: Drawer
                          properties:
                            title: More details
                            open: 
                              _not:
                                _not:
                                  _state: example_2_open
                          actions:
                            onOk: 
                              - id: click_ok
                                type: SetState
                                params:
                                  example_2_open:
                                    _not:
                                      _state: example_2_open
                            onCancel: 
                              - id: click_cancel
                                type: SetState
                                params:
                                  example_2_open:
                                    _not:
                                      _state: example_2_open
                          blocks:
                            - id: example_2_drawer
                              type: Markdown
                              properties:
                                content: |
                                  This drawer is controlled by the external state `example_2_open`.
                      ```
        


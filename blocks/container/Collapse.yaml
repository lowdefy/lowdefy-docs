id: Collapse
type: PageSiderMenu
public: true
properties:
  title: Collapse
actions:
  onInit:
    - id: init_blocks
      type: setState()
      params:
        _ref: blocks/html_blocks.yaml
    - id: init_panels
      type: setState()
      params:
        block:
            properties:
              panels:
                - key: content1
                  title: Title 1
                - key: content2
                  title: Title 2
blocks:
  - id: card_title
    type: Card
    blocks:
      - id: title
        type: Title
        properties:
          level: 2
          content: Collapse
      - id: description
        type: Markdown
        properties:
          content: |
            A container with collapsible panels.
  - id: c1
    type: Box
    blocks:
      - id: block_wrap2
        type: Box
        style:
          --span: 6
        blocks:
          - id: block_divider
            type: Divider
            properties:
              title: Block

          - id: block_name
            type: Collapse
            style:
              _parse: 
                _state: flex_style_input
            visible:
              _state: block.visible
            properties:
              _state: block.properties

            blocks:
              content2:
                - id: flex_1
                  type: Html
                  properties:
                    html: '<div>ONE</div>'
                  visible:
                    _state: flex_blocks.0.visible
                  style:
                    _parse:
                      _state: flex_blocks.0.style
                - id: flex_2
                  type: Html
                  properties:
                    html: '<div>TWO</div>'
                  visible:
                    _state: flex_blocks.1.visible
                  style:
                    _parse:
                      _state: flex_blocks.1.style
                - id: flex_3
                  type: Html
                  properties:
                    html: '<div>THREE</div>'
                  visible:
                    _state: flex_blocks.2.visible
                  style:
                    _parse:
                      _state: flex_blocks.2.style
                - id: flex_4
                  type: Html
                  properties:
                    html: '<div>FOUR</div>'
                  visible:
                    _state: flex_blocks.3.visible
                  style:
                    _parse:
                      _state: flex_blocks.3.style
                - id: flex_5
                  type: Html
                  properties:
                    html: '<div>FIVE</div>'
                  visible:
                    _state: flex_blocks.4.visible
                  style:
                    _parse:
                      _state: flex_blocks.4.style
                - id: flex_6
                  type: Html
                  properties:
                    html: '<div>SIX</div>'
                  visible:
                    _state: flex_blocks.5.visible
                  style:
                    _parse:
                      _state: flex_blocks.5.style

              content1:
                - id: grid_1
                  type: Html
                  properties:
                    html: '<div>ONE</div>'
                  visible:
                    _state: grid_blocks.0.visible
                  style:
                    _parse:
                      _state: grid_blocks.0.style
                - id: grid_2
                  type: Html
                  properties:
                    html: '<div>TWO</div>'
                  visible:
                    _state: grid_blocks.1.visible
                  style:
                    _parse:
                      _state: grid_blocks.1.style
                - id: grid_3
                  type: Html
                  properties:
                    html: '<div>THREE</div>'
                  visible:
                    _state: grid_blocks.2.visible
                  style:
                    _parse:
                      _state: grid_blocks.2.style
                - id: grid_4
                  type: Html
                  properties:
                    html: '<div>FOUR</div>'
                  visible:
                    _state: grid_blocks.3.visible
                  style:
                    _parse:
                      _state: grid_blocks.3.style
                - id: grid_5
                  type: Html
                  properties:
                    html: '<div>FIVE</div>'
                  visible:
                    _state: grid_blocks.4.visible
                  style:
                    _parse:
                      _state: grid_blocks.4.style
                - id: grid_6
                  type: Html
                  properties:
                    html: '<div>SIX</div>'
                  visible:
                    _state: grid_blocks.5.visible
                  style:
                    _parse:
                      _state: grid_blocks.5.style

          - id: setup_flex
            type: Box
            blocks:
              - id: setup_divider
                type: Divider
                properties:
                  title: Block Setup
              - id: setup_card
                type: Card
                properties: 
                  size: small
                blocks:
                  - id: setup_markdown
                    type: Markdown
                    properties:
                      content:
                        _nunjucks:
                          template: |
                            ```yaml
                            {{ value | safe }}
                            ```
                          on:
                            value:
                              _stringify:
                                id: block_id
                                type:
                                  _state: style_transform
                                style:
                                  _parse: 
                                    _state: flex_style_input
                                visible:
                                  _state: block.visible
                                properties:
                                  _state: block.properties

      - id: settings_grid
        type: Box
        style:
          --span: 6
        blocks:
          - id: settings_divider
            type: Divider
            properties:
              title: Settings
          - id: block_collapse
            type: Collapse
            properties:
              defaultActiveKey: properties
              panels:
                - key: style
                  title: 'style:'
                - key: properties
                  title: 'properties:'
                - key: actions
                  title: 'actions:'
                - key: visible
                  title: 'visible:'
                - key: blocks
                  title: 'blocks:'
            blocks:
              style:
                - id: style_form
                  type: Box
                  style:
                    Content:
                      --gap: 0
                  blocks:
                    - id: flex_style_input
                      type: TextArea
                      style:
                        _global: settings_input_style
                      defaultValue: |
                        {}
                      properties:
                        title: block
                        rows: 3
                        size: small
                        Label:
                          extra: CSS Object style properties. Should be in JSON format.
              visible:
                - id: block.visible
                  type: Switch
                  defaultValue: true
                  properties:
                    title: visible
                    Label:
                      extra: Toggle if block is visible and has a value in state.
                      inline: true
                    size: small

              properties:
                - id: flex_properties_form
                  type: Box
                  style:
                    Content:
                      --gap: 0
                  blocks:
                    - id: block.properties.accordion
                      type: Switch
                      defaultValue: false
                      style:
                        _global: settings_input_style
                      properties:
                        title: accordion
                        size: small
                        Label:
                          extra: If true, only one panel is open at a time.
                    - id: block.properties.activeKey
                      type: TextInput
                      style:
                        _global: settings_input_style
                      properties:
                        title: activeKey
                        size: small
                        Label:
                          extra: Current Panel's key.
                    - id: block.properties.bordered
                      type: Switch
                      defaultValue: true
                      style:
                        _global: settings_input_style
                      properties:
                        title: bordered
                        size: small
                        Label:
                          extra: Toggles rendering of the border around the collapse block.
                    - id: block.properties.defaultActiveKey
                      type: TextInput
                      defaultValue: content1
                      style:
                        _global: settings_input_style
                      properties:
                        title: defaultActiveKey
                        size: small
                        Label:
                          extra: Initial active Panel's key, if activeKey is not set.
                    - id: block.properties.destroyInactivePanel
                      type: Switch
                      defaultValue: false
                      style:
                        _global: settings_input_style
                      properties:
                        title: destroyInactivePanel
                        size: small
                        Label:
                          extra: Destroy Inactive Panel.
                    - _ref:
                        path: blocks/icon_template.yaml
                        vars:
                          icon_id: block.properties.IconExpand
                          icon_field_name: IconExpand
                          default_icon: RightOutlined
                          icon_description: Icon to show as expand option.
                    - id: block.properties.expandIconPosition
                      type: ButtonSelector
                      defaultValue: left
                      style:
                        _global: settings_input_style
                      properties:
                        title: expandIconPosition
                        size: small
                        Label:
                          extra: Set position of expand icon.
                        options:
                          - left
                          - right
                    - id: block.properties.forceRender
                      type: Switch
                      defaultValue: false
                      style:
                        _global: settings_input_style
                      properties:
                        title: forceRender
                        size: small
                        Label:
                          extra: Force render for all panels.
                    - id: block.properties.panels
                      type: List
                      properties:
                        title: 'panels:'
                        size: small
                      blocks:
                        - id: block.properties.panels.$.title
                          type: TextInput
                          defaultValue: title
                          style:
                            _global: settings_input_style
                          properties:
                            title: title
                            size: small
                            Label:
                              extra: Title of the panel.
                        - id: block.properties.panels.$.key
                          type: TextInput
                          defaultValue: key
                          style:
                            _global: settings_input_style
                          properties:
                            title: key
                            size: small
                            Label:
                              extra: Key of the panel.
                        - id: block.properties.panels.$.disabled
                          type: Switch
                          defaultValue: false
                          style:
                            _global: settings_input_style
                          properties:
                            title: disabled
                            size: small
                            Label:
                              extra: Disable the panel if true.

                    - id: block.properties.showArrow
                      type: Switch
                      defaultValue: true
                      style:
                        _global: settings_input_style
                      properties:
                        title: showArrow
                        size: small
                        Label:
                          extra: Show expand icon.

              actions:
                - id: actions_description
                  type: Markdown
                  properties:
                    content: |
                      ###### No available actions.

              blocks:
                - id: flex_blocks
                  type: List
                  style:
                    Content:
                      --display: flex
                  properties:
                    title: Content 1
                    hideAddButton: true
                    hideRemoveButton: true
                  blocks:
                    - id: flex_blocks.$.gd
                      type: Box
                      style:
                        flex: 0 0 15ch
                        Content:
                          --display: flex
                      blocks:
                        - id: flex_blocks.$.name
                          type: Markdown
                          properties:
                            content: 
                              _nunjucks: 
                                template: '##### {{ name }}'
                                on:
                                  _state: flex_blocks.$
                        - id: flex_blocks.$.visible
                          type: Switch
                          style:
                            Label:
                              --inline: true
                          properties:
                            title: visible
                            size: small
                    - id: flex_blocks.$.style
                      type: TextArea
                      style:
                        flex: auto
                        Label:
                          --inline: true
                      properties:
                        title: style
                        size: small
                        rows: 3
                
                - id: grid_blocks
                  type: List
                  style:
                    Content:
                      --display: flex
                  properties:
                    title: Content 2
                    hideAddButton: true
                    hideRemoveButton: true
                  blocks:
                    - id: grid_blocks.$.gd
                      type: Box
                      style:
                        flex: 0 0 15ch
                        Content:
                          --display: flex
                      blocks:
                        - id: grid_blocks.$.name
                          type: Markdown
                          properties:
                            content: 
                              _nunjucks: 
                                template: '##### {{ name }}'
                                on:
                                  _state: grid_blocks.$
                        - id: grid_blocks.$.visible
                          type: Switch
                          style:
                            Label:
                              --inline: true
                          properties:
                            title: visible
                            size: small
                    - id: grid_blocks.$.style
                      type: TextArea
                      style:
                        flex: auto
                        Label:
                          --inline: true
                      properties:
                        title: style
                        size: small
                        rows: 3

      - id: examples_divider
        type: Divider
        properties:
          title: Examples
      - id: examples_grid
        type: Box
        blocks:
          _var: examples